<%- include('templates/header',{css:[]}) %>

<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<!-- Search Bar with Icons -->
<div class="container my-4">
    <div class="row g-2 align-items-center flex-wrap">

        <!-- Search Input with Icon -->
        <div class="col-12 col-md-6">
            <div class="input-group input-group-lg">
                <input id="search" type="text" class="form-control" placeholder="Search..." aria-label="Search" />

                <a id="searchBtn" class="btn btn-outline-primary" type="button">
                    <i class="fas fa-search me-1"></i> Search
                </a>
            </div>
        </div>

        <!-- AI Match Button -->
        <div class="col-6 col-md-auto">
            <a href="/match-alumni" class="btn btn-primary w-100">
                <i class="fas fa-wand-magic-sparkles me-2"></i> AI Match
            </a>
        </div>

        <!-- Leaderboard Button -->
        <div class="col-6 col-md-auto">
            <a href="/leaderboard" class="btn btn-success w-100">
                <i class="fas fa-trophy me-2"></i> Leaderboard
            </a>
        </div>

    </div>
</div>
<br><br>

<div class="container py-5">


    <div class="row g-4">
        <% alumni.forEach(user => { %>
            <div class="col-12">
                <div class="card shadow-sm h-100">
                    <a href="connect/<%=user.username%>" style="text-decoration: none">
                        <div style="cursor: pointer" class="row g-0 align-items-center">

                            <!-- Image Column -->
                            <div class="col-md-3 text-center p-3">
                                     <span class="badge bg-success text-dark d-inline-flex align-items-center px-3 py-2 fs-6 rounded-pill shadow-sm">
                            <i class="bi bi-fire text-danger me-2"></i>
                            <strong><%= user.points || 0 %> Points</strong>
                            </span>
                                <br><br>
                                <img src="<%= user.image || '/default-profile.png' %>" class="rounded-circle img-fluid" style="width: 120px; height: 120px; object-fit: cover;" alt="Profile">
                            </div>

                            <!-- Info Column -->
                            <div class="col-md-9">
                                <div class="card-body">
                                    <h5 class="card-title mb-1"><%= user.name %> <%= user.lastname %></h5>
                                    <p class="text-muted mb-2">
                                        <%= user.work?.[0]?.role || 'No current role listed' %>
                                    </p>

                                    <% if (user.work && user.work.length > 0) { %>
                                        <ul class="list-group list-group-flush">
                                            <% user.work.forEach((job, i) => { %>
                                                <li class="list-group-item px-0">
                                                    <strong><%= job.role %></strong> at <%= job.company %><br>
                                                    <small class="text-muted"><%= job.years %></small><br>
                                                    <em><%= job.description %></em>
                                                </li>
                                            <% }); %>
                                        </ul>
                                    <% } else { %>
                                        <p class="text-muted">No work history available.</p>
                                    <% } %>
                                </div>
                            </div>

                        </div>
                    </a>
                </div>
            </div>
        <% }); %>
    </div>
</div>
<script>

    document.getElementById("search").addEventListener("input", (event) => {
        document.getElementById("searchBtn").setAttribute("href","/search?query="+document.getElementById("search").value)
    })
</script>

<%- include('templates/footer', {currentPage:'home'}) %>

